<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="çŠè¿ª">



    <meta name="description" content="çŠè¿ªçš„éƒ¨è½æ ¼">





<title>ã€ç­†è¨˜ã€‘Reactï¼šè§£æ useRef çš„ä½¿ç”¨ç›®èˆ‡å ´æ™¯ | Coding Gallery</title>



    <link rel="icon" href="/favicon.ico">



<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Roboto+Mono&display=swap');
</style>



    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    




    <!-- scripts list from _config.yml -->
    
    <script src="/js/frame.js"></script>
    










  <meta name="generator" content="Hexo 6.1.0"></head>
  <body>
    <div class="mask-border">
    </div>

    <div class="wrapper">

      <div class="header">
  <div class="flex-container">
    <div class="header-inner">
      <div class="site-brand-container">
        <a href="/">
          
            Coding Gallery ğŸ‘©â€ğŸ¨
          
        </a>
      </div>
      <div id="menu-btn" class="menu-btn" onclick="toggleMenu()">
        Menu
      </div>
      <nav class="site-nav">
        <ul class="menu-list">
          
            
              <li class="menu-item">
                <a href="/">Home</a>
              </li> 
                   
          
            
              <li class="menu-item">
                <a href="/archives/">Archive</a>
              </li> 
                   
          
        </ul>
      </nav>
    </div>
  </div>
</div>


      <div class="main">
        <div class="flex-container">
          <article id="post">

  
    <div class="post-head">
    <div class="post-info">
        <div class="tag-list">
            
                
                    <span class="post-tag">
                        <a href="/tags/React/">
                            React
                        </a>
                    </span>    
                
                    <span class="post-tag">
                        <a href="/tags/React-Hook/">
                            React Hook
                        </a>
                    </span>    
                
                    <span class="post-tag">
                        <a href="/tags/useRef/">
                            useRef
                        </a>
                    </span>    
                           
            
        </div>
        <div class="post-title">
            
            
                ã€ç­†è¨˜ã€‘Reactï¼šè§£æ useRef çš„ä½¿ç”¨ç›®èˆ‡å ´æ™¯
            
            
        </div>
        <span class="post-date">
            9æœˆ 3, 2023
        </span>
    </div>
    <div class="post-img">
        
            <div class="h-line-primary"></div>
              
    </div>
</div>
    <div class="post-content">
    <p>æ¥ä¸‹ä¾†å¹¾ç¯‡æ–‡ç« å°‡æœƒé‡å° React å¸¸è¦‹çš„ Hooks çš„ä½¿ç”¨ç›®çš„èˆ‡å ´æ™¯ ï¼Œå…§å®¹ä¸»è¦éƒ½æ˜¯é€éå®˜æ–¹æ–‡ä»¶ã€ä¸€äº›å¤§å¸«å½±ç‰‡ä»¥åŠè‡ªèº«é–‹ç™¼ç¶“é©—å½™æ•´å‡ºä¾†çš„ï¼Œå¦‚æœæœ‰å¾ˆä¸éŒ¯çš„å­¸ç¿’è³‡æºæˆ‘ä¹Ÿæœƒåœ¨æ–‡æœ«ç•™ä¸‹ä¾†æºä¾›å¤§å®¶åƒè€ƒå–”ï¼</p>
<p>é¦–ç¯‡å°±ä¾†ä¸€å€‹æœ€è¿‘é–‹ç™¼ä¸­å¾ˆå¸¸ä½¿ç”¨åˆ°çš„ <code>useRef</code></p>
<p><img src="/images/React-useRef.png" alt="useRef"></p>
<h2 id="èªè­˜ä¸€ä¸‹å§-useRef"><a href="#èªè­˜ä¸€ä¸‹å§-useRef" class="headerlink" title="èªè­˜ä¸€ä¸‹å§ useRef"></a>èªè­˜ä¸€ä¸‹å§ useRef</h2><p>å…ˆè®“æˆ‘å€‘ä¾†çœ‹çœ‹ React å®˜æ–¹æ–‡ä»¶çš„ useRef å®šç¾©ï¼š</p>
<blockquote>
<p><code>useRef</code> is a React Hook that lets you reference a value thatâ€™s not needed for rendering.</p>
</blockquote>
<p>ç°¡å–®ä¾†èªªæœ‰èˆ‡ <code>state</code> ç›¸ä¼¼çš„åŠŸèƒ½éƒ½æ˜¯æš«å­˜å€¼ï¼Œä½†æœ€å¤§çš„ä¸åŒå°±æ˜¯ <code>useRef</code> è£¡çš„ ref object å°±ç®—è®Šå‹•äº†ä¹Ÿä¸æœƒé€ æˆç•«é¢çš„ re-renderï¼Œæ˜¯å®Œå…¨éš”çµ•æ–¼ component life cycle å¤–çš„ç‹€æ…‹ã€‚</p>
<h2 id="useRef-å¯¦ç”¨å ´æ™¯"><a href="#useRef-å¯¦ç”¨å ´æ™¯" class="headerlink" title="useRef å¯¦ç”¨å ´æ™¯"></a>useRef å¯¦ç”¨å ´æ™¯</h2><h3 id="1-Referencing-a-value-with-a-refï¼ˆä½¿ç”¨-ref-å°ç…§å€¼ï¼‰"><a href="#1-Referencing-a-value-with-a-refï¼ˆä½¿ç”¨-ref-å°ç…§å€¼ï¼‰" class="headerlink" title="1. Referencing a value with a refï¼ˆä½¿ç”¨ ref å°ç…§å€¼ï¼‰"></a>1. Referencing a value with a refï¼ˆä½¿ç”¨ ref å°ç…§å€¼ï¼‰</h3><p>é€™æ˜¯ <code>useRef</code> æœ€åŸºæœ¬çš„ç”¨æ³•ã€‚å¯ä»¥ç”¨å®ƒä¾†å‰µå»ºä¸€å€‹ã€Œå¯è®Šã€çš„ ref objectï¼Œobject çš„ <code>.current</code> å±¬æ€§è¢«åˆå§‹åŒ–ç‚ºå‚³éçµ¦ <code>useRef()</code> çš„åƒæ•¸ï¼Œåœ¨å¾ŒçºŒçš„ re-render ä¸­ï¼Œ<code>useRef</code> å°‡è¿”å›ç›¸åŒçš„ objectã€‚è€Œä¸”é€™å€‹ object å¯ä»¥æ›´æ”¹å…¶ <code>current</code> å±¬æ€§ä»¥å­˜å„²ç‚ºæ–°çš„å€¼ï¼Œå°±ç®—å€¼æ›´æ–°äº†ä¹Ÿä¸æœƒè®“æ•´å€‹ç•«é¢  re-renderã€‚</p>
<p>æ¥è‘—èˆ‰å…©å€‹å¸¸è¦‹çš„ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<h4 id="ğŸ”-ex1-å­˜å–æœ€æ–°çš„å€¼"><a href="#ğŸ”-ex1-å­˜å–æœ€æ–°çš„å€¼" class="headerlink" title="ğŸ” ex1. å­˜å–æœ€æ–°çš„å€¼"></a>ğŸ” ex1. å­˜å–æœ€æ–°çš„å€¼</h4><p>è‹¥æˆ‘å€‘æƒ³è¦åœ¨è‹¥å¹²ç§’æ•¸å¾Œå–å¾—æŸä¸€å€‹ç‹€æ…‹çš„æœ€æ–°å€¼ï¼Œ<code>useRef</code> å°±å¯ä»¥æ´¾ä¸Šç”¨å ´äº†ï¼ï¼</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [timeoutCount, setTimeoutCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> countRef = <span class="title function_">useRef</span>(count);</span><br><span class="line">countRef.<span class="property">current</span> = count;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getCountTimeout</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    setTimeoutCount(countRef.<span class="property">current</span>);</span><br><span class="line">  &#125;, <span class="number">5000</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>é€™é‚Šç‚ºä»€éº¼ä½¿ç”¨ <code>ref.current</code> å­˜å€¼ï¼Œè€Œä¸æ˜¯ç”¨ <code>state</code>ï¼Ÿ</p>
<p>å› ç‚ºç•¶ <code>setTimeout</code> è¢«å»ºç«‹æ™‚ï¼Œå®ƒä½¿ç”¨çš„æ˜¯ç•¶æ™‚ <code>count</code> çš„å€¼ï¼Œå®ƒä¾è³´ä¸€å€‹é–‰åŒ…ï¼ˆclosureï¼‰ä¾†ç•°æ­¥è¨ªå• <code>count</code>ã€‚å› æ­¤ç•¶çµ„ä»¶é‡æ–°æ¸²æŸ“æ™‚ï¼Œä¸€å€‹æ–°çš„é–‰åŒ…æœƒè¢«å‰µå»ºï¼Œä½†é€™ä¸æœƒæ”¹è®Šæœ€åˆè¢«å°é–‰çš„å€¼ï¼Œæ‰€ä»¥å¦‚æœç”¨äº† <code>state</code>ï¼Œç•¶ 5 ç§’å¾Œä½ ä»¥ç‚º <code>count</code> å·²ç¶“è®Šæ›´äº†æ‹¿å‡ºä¾†ç”¨ï¼Œæœƒç™¼ç¾è©² <code>state</code> é‚„æ˜¯åˆå§‹çš„ 0ã€‚</p>
<p>é€™å°±æ˜¯ <code>useRef</code> çš„ä¸€å€‹å¯¦ç”¨æƒ…æ™¯å¯ä»¥é¿å…ä¸Šè¿°çš„æƒ…å½¢ç™¼ç”Ÿï¼Œæˆ‘å€‘é€éå°‡ç‹€æ…‹å€¼èˆ‡ ref çš„ <code>current</code> å±¬æ€§åŒæ­¥ï¼Œä¸¦åœ¨ <code>timeout</code> ä¸­è®€å– <code>current</code>ä»¥å–å¾—æˆ‘å€‘æƒ³è¦çš„å€¼ã€‚</p>
<h4 id="ğŸ”-ex2-å­˜å–ã€Œå‰ä¸€å€‹å€¼ã€"><a href="#ğŸ”-ex2-å­˜å–ã€Œå‰ä¸€å€‹å€¼ã€" class="headerlink" title="ğŸ” ex2. å­˜å–ã€Œå‰ä¸€å€‹å€¼ã€"></a>ğŸ” ex2. å­˜å–ã€Œå‰ä¸€å€‹å€¼ã€</h4><p>å‘ˆä¸Šï¼Œæˆ‘å€‘ç•¶ç„¶ä¹Ÿå¯ä»¥æ‹¿ä¾†å­˜å–å‰ä¸€å€‹å€¼ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [name, setName] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> prevName = <span class="title function_">useRef</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">	prevName.<span class="property">current</span> = name;</span><br><span class="line">&#125;,[name]) </span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>My name is &#123;name&#125;, and it used to be &#123;prevName.current&#125;.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="2-Manipulating-the-DOM-with-a-refï¼ˆä½¿ç”¨-ref-æ“ä½œ-DOM-ï¼‰"><a href="#2-Manipulating-the-DOM-with-a-refï¼ˆä½¿ç”¨-ref-æ“ä½œ-DOM-ï¼‰" class="headerlink" title="2. Manipulating the DOM with a refï¼ˆä½¿ç”¨ ref æ“ä½œ DOM ï¼‰"></a>2. Manipulating the DOM with a refï¼ˆä½¿ç”¨ ref æ“ä½œ DOM ï¼‰</h3><p>åœ¨ React ä¸­æˆ‘å€‘å¯ä»¥ä½¿ç”¨ <code>useRef</code> ä¾†ç›´æ¥æ“ä½œ DOM å…ƒç´ ã€‚é€šéå°‡ ref å°è±¡çš„ <code>.current</code> å±¬æ€§è¨­ç½®ç‚ºä¸€å€‹ DOM ç¯€é»ï¼Œå¯ä»¥ç›´æ¥è®€å–æˆ–ä¿®æ”¹é€™å€‹ç¯€é»ã€‚</p>
<h4 id="ğŸ”-ex1-å–ç”¨æŸä¸€å€‹-DOM-ä½œé€²ä¸€æ­¥æ“ä½œ"><a href="#ğŸ”-ex1-å–ç”¨æŸä¸€å€‹-DOM-ä½œé€²ä¸€æ­¥æ“ä½œ" class="headerlink" title="ğŸ” ex1. å–ç”¨æŸä¸€å€‹ DOM ä½œé€²ä¸€æ­¥æ“ä½œ"></a>ğŸ” ex1. å–ç”¨æŸä¸€å€‹ DOM ä½œé€²ä¸€æ­¥æ“ä½œ</h4><p>æœ€ç°¡å–®å¸¸ç”¨çš„ä½¿ç”¨æƒ…å¢ƒåŒ…å«åˆ—å°ã€æ“ä½œç‰¹å®šçš„ DOM Scroll to viewã€ç›£è½ç„¡é™æ»¾å‹•çš„æœ€å¾Œä¸€å€‹å…ƒç´ ç­‰ç­‰ï¼Œé€™é‚Šèˆ‰åˆ—å°ç‚ºä¾‹ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> printRef = useRef&lt;<span class="title class_">HTMLDivElement</span>&gt;(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">const</span> handlePrint = <span class="title function_">useReactToPrint</span>(&#123;</span><br><span class="line">        <span class="attr">content</span>: <span class="function">() =&gt;</span> printRef.<span class="property">current</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">PrintArea</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">			// åˆ—å°å…§å®¹ç•¥</span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">PrintArea</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="ğŸ”-ex2-çˆ¶çµ„ä»¶ä½¿ç”¨-useRef-èª¿ç”¨å­çµ„ä»¶çš„æ–¹æ³•"><a href="#ğŸ”-ex2-çˆ¶çµ„ä»¶ä½¿ç”¨-useRef-èª¿ç”¨å­çµ„ä»¶çš„æ–¹æ³•" class="headerlink" title="ğŸ” ex2. çˆ¶çµ„ä»¶ä½¿ç”¨ useRef èª¿ç”¨å­çµ„ä»¶çš„æ–¹æ³•"></a>ğŸ” ex2. çˆ¶çµ„ä»¶ä½¿ç”¨ <code>useRef</code> èª¿ç”¨å­çµ„ä»¶çš„æ–¹æ³•</h4><p>åœ¨ react çš„çˆ¶å­å±¤çš„é—œä¿‚ï¼Œçˆ¶å±¤è‹¥è¦å‘¼å«å­˜åœ¨å­å±¤çš„å‡½å¼é€šå¸¸æœƒå°‡å‡½å¼æ”¾ç½®åœ¨çˆ¶å±¤ï¼Œä¸¦ä¸”å°‡å‡½å¼èˆ‡ç›¸é—œçš„ç‹€æ…‹ä¸€èµ·å‚³å…¥å­å±¤ä¸­åšä½¿ç”¨ã€‚ä¹Ÿæ˜¯ä¹‹å‰åˆ†äº«éçš„æ–‡ç« ã€åœ–è§£ã€‘React å¸¸è¦‹çš„çˆ¶å­å‚³å€¼æ–¹æ³• Propsï¼ˆ<a target="_blank" rel="noopener" href="https://leewanhsuan.github.io/2022/04/25/01-props/%EF%BC%89%E6%89%80%E6%8F%90%E9%81%8E%E7%9A%84%E6%96%B9%E6%B3%95%E3%80%82">https://leewanhsuan.github.io/2022/04/25/01-props/ï¼‰æ‰€æéçš„æ–¹æ³•ã€‚</a></p>
<p>è€Œä¸‹æ–¹æ”¹æˆä»¥ <code>useRef</code> çš„æ–¹å¼å¯¦è¸ï¼Œé€™æ®µç¯„ä¾‹ä¸­ä½¿ç”¨ <code>React.forwardRef</code> å’Œ <code>React.useImperativeHandle</code> ä¾†å¾çˆ¶çµ„ä»¶èª¿ç”¨å­çµ„ä»¶çš„æ–¹æ³•ï¼Œé€™æ¨£å¯ä»¥æŠŠæ–¹æ³•ä¿ç•™åœ¨å­å±¤ä¸­ï¼Œå»åˆèƒ½åœ¨çˆ¶å±¤ä¸­èª¿ç”¨ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useRef, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ChildComponent</span> = <span class="title class_">React</span>.<span class="title function_">forwardRef</span>(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// é€™å€‹æ–¹æ³•æœƒè¢«çˆ¶çµ„ä»¶èª¿ç”¨</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">method</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Child component method called!&#x27;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä½¿ç”¨ ref å°‡æ–¹æ³•æä¾›çµ¦çˆ¶çµ„ä»¶</span></span><br><span class="line">  <span class="title class_">React</span>.<span class="title function_">useImperativeHandle</span>(ref, <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    someMethod,</span><br><span class="line">  &#125;));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Child Component<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ParentComponent</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> childRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ ref èª¿ç”¨å­çµ„ä»¶çš„ method æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">if</span> (childRef.<span class="property">current</span>) &#123;</span><br><span class="line">      childRef.<span class="property">current</span>.<span class="title function_">method</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Parent Component<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ChildComponent</span> <span class="attr">ref</span>=<span class="string">&#123;childRef&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">ParentComponent</span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-Avoiding-recreating-the-ref-contentsï¼ˆé¿å…ä¸å¿…è¦çš„é‡å»º-ref-å…§å®¹ï¼‰"><a href="#3-Avoiding-recreating-the-ref-contentsï¼ˆé¿å…ä¸å¿…è¦çš„é‡å»º-ref-å…§å®¹ï¼‰" class="headerlink" title="3. Avoiding recreating the ref contentsï¼ˆé¿å…ä¸å¿…è¦çš„é‡å»º ref å…§å®¹ï¼‰"></a>3. Avoiding recreating the ref contentsï¼ˆé¿å…ä¸å¿…è¦çš„é‡å»º ref å…§å®¹ï¼‰</h3><p>ä½¿ç”¨ <code>useRef</code> å¯ä»¥å¹«åŠ©ä½ é¿å…åœ¨é‡æ–°æ¸²æŸ“ component æ™‚ä¸å¿…è¦åœ°é‡å»º ref çš„å…§å®¹ï¼Œå› ç‚º ref æœƒåœ¨ re-render ä¸­ä¿æŒä¸è®Šï¼Œä¾‹å¦‚ä¸€äº›è³‡æºå¾ˆå¤§çš„å½±éŸ³ component å°±å¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œé¿å…é‡è¤‡æ‹¿å–è³‡æºã€æ›´æ–°ç•«é¢ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Video</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> playerRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">if</span> (playerRef.<span class="property">current</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">    playerRef.<span class="property">current</span> = <span class="keyword">new</span> <span class="title class_">VideoPlayer</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šå°±æ˜¯ <code>useRef</code> å®˜æ–¹æä¾›çš„ä¸‰ç¨®ä½¿ç”¨æƒ…å¢ƒä»¥åŠå°æ‡‰çš„ç¯„ä¾‹ï¼Œåœ¨æ•´ç†çš„éç¨‹ä¸­ä¹Ÿè®“æˆ‘æ›´åŠ èªè­˜ <code>useRef</code> äº†ï¼Œå¸Œæœ›ä¹Ÿèƒ½å¹«åŠ©åˆ°ä½ å”·ï¼</p>
<h2 id="æœ€å¾Œï¼Œè«‹æ³¨æ„-useRef-ä½¿ç”¨äº‹é …"><a href="#æœ€å¾Œï¼Œè«‹æ³¨æ„-useRef-ä½¿ç”¨äº‹é …" class="headerlink" title="æœ€å¾Œï¼Œè«‹æ³¨æ„ useRef ä½¿ç”¨äº‹é …"></a>æœ€å¾Œï¼Œè«‹æ³¨æ„ useRef ä½¿ç”¨äº‹é …</h2><p>Web Dev Simplified çš„è¬›è€…åœ¨å…¶ <code>useRef</code> æ•™å­¸å½±ç‰‡ä¸­ç‰¹åˆ¥å¼·èª¿ï¼Œé›–ç„¶ useRef æœ‰å¤šç¨®ç”¨é€”ï¼Œä½†å®ƒä¸¦ä¸æ‡‰è©²éåº¦å–ä»£ <code>useState</code>ã€‚ç‰¹åˆ¥æ˜¯åœ¨è™•ç†ç”¨æˆ¶äº¤äº’ï¼Œå¦‚å€¼çš„æ›´æ”¹ï¼ˆonChange Valueï¼‰æ™‚ï¼Œéåº¦ä¾è³´ <code>useRef</code> å¯èƒ½æœƒè®“ç¨‹å¼ç¢¼è®Šå¾—éæ–¼è¤‡é›œã€‚ä¹Ÿå¯èƒ½è®“ä½ å¤±å» React Hook çš„æ¸²æŸ“ç”Ÿå‘½é€±æœŸï¼ˆre-render life cycleï¼‰æ‰€å¸¶ä¾†çš„å„ªå‹¢ã€‚</p>
<hr>
<p>ğŸ’¬ åƒè€ƒè³‡æ–™ï¼š</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/@WebDevSimplified">Web Dev Simplified</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40016215/article/details/124991559">react hook çˆ¶è°ƒç”¨å­çš„æ–¹æ³• useRef</a></li>
</ol>

</div> 

<script>
    window.onload = detectors();
    window.onload = gtag();
</script>
    <div class="post-footer">
    <div class="h-line-primary"></div>
    <nav class="post-nav">
        <div class="prev-item">
           
        </div>
        <div class="next-item">
            
                <div class="icon arrow-right"></div>
                <div class="post-link">
                  <a href="/2023/09/03/01-props/">Next</a>  
                </div>  
            
        </div>
    </nav>
</div>

    
      <div class="post-comment">

     

     
    
    

</div>
     
  
  <div>
    <section id="comments" class="comments">
      <style>
        .utterances{max-width: 100%;}
      </style>
        <script src="https://utteranc.es/client.js"
        repo="Leewanhsuan/coding_gallery_comment"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
      </script>
  </section>
</div>
</article>
        </div>
      </div>
      
      <div class="footer">
    <div class="flex-container">
        <div class="footer-text">
            
            
                çŠè¿ª | 
            
            
                Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> & <a target="_blank" rel="noopener" href="https://github.com/zoeingwingkei/frame/">Frame</a>
                
        </div>
    </div>
</div>

    </div>

  </body>
</html>
